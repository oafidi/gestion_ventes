@startuml DA01 - Authentification

!theme plain
title <size:20>**DA01 - Processus d'Authentification**</size>\n<size:14>//Inscription et Connexion des utilisateurs//</size>

skinparam backgroundColor #FEFEFE
skinparam ActivityBackgroundColor #E3F2FD
skinparam ActivityBorderColor #1976D2
skinparam ActivityDiamondBackgroundColor #FFF3E0
skinparam ActivityDiamondBorderColor #F57C00
skinparam ArrowColor #1976D2

|#E8F5E9| ğŸ‘¤ Utilisateur |
|#E3F2FD| ğŸ” SystÃ¨me Authentification |

start

|ğŸ‘¤ Utilisateur|
:AccÃ©der Ã  la plateforme;

if (PossÃ¨de un compte ?) then (Non)
    
    :ğŸ“ Remplir le formulaire d'inscription;
    note right
        **Informations requises :**
        â€¢ Nom complet
        â€¢ Email
        â€¢ Mot de passe
        â€¢ RÃ´le (Client / Vendeur)
        â€¢ TÃ©lÃ©phone
    end note
    
    |ğŸ” SystÃ¨me Authentification|
    :VÃ©rifier la disponibilitÃ© de l'email;
    
    if (Email dÃ©jÃ  utilisÃ© ?) then (Oui)
        :âŒ Afficher erreur\n"Email dÃ©jÃ  existant";
        |ğŸ‘¤ Utilisateur|
        :Corriger l'email;
        stop
    else (Non)
        :âœ… CrÃ©er le compte utilisateur;
        
        if (RÃ´le = Vendeur ?) then (Oui)
            :Marquer comme\n"En attente d'approbation";
            note right
                **estApprouve = false**
                Le vendeur doit attendre
                la validation admin
            end note
        else (Non - Client)
            :Compte actif immÃ©diatement;
        endif
        
        :ğŸ“§ Envoyer email de bienvenue;
    endif
    
else (Oui)
    
    |ğŸ‘¤ Utilisateur|
    :ğŸ”‘ Saisir email et mot de passe;
    
    |ğŸ” SystÃ¨me Authentification|
    :VÃ©rifier les identifiants;
    
    if (Identifiants valides ?) then (Non)
        :âŒ Afficher erreur\n"Identifiants incorrects";
        
        if (3 tentatives Ã©chouÃ©es ?) then (Oui)
            :ğŸ”’ Bloquer temporairement le compte;
            stop
        else (Non)
            |ğŸ‘¤ Utilisateur|
            :RÃ©essayer la connexion;
            stop
        endif
        
    else (Oui)
        :âœ… CrÃ©er la session utilisateur;
    endif
    
endif

|ğŸ” SystÃ¨me Authentification|
:DÃ©terminer le rÃ´le de l'utilisateur;

switch (RÃ´le de l'utilisateur ?)
case (ğŸ›¡ï¸ ADMIN)
    :Rediriger vers\n**Tableau de bord Admin**;
case (ğŸª VENDEUR)
    if (Vendeur approuvÃ© ?) then (Oui)
        :Rediriger vers\n**Espace Vendeur**;
    else (Non)
        :Rediriger vers\n**Page d'attente**\n"Compte en cours de validation";
    endif
case (ğŸ›’ CLIENT)
    :Rediriger vers\n**Boutique en ligne**;
endswitch

|ğŸ‘¤ Utilisateur|
:ğŸ‰ AccÃ¨s Ã  l'espace personnel;

stop

legend right
    **RÃ¨gles mÃ©tier :**
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    â€¢ Email unique par compte
    â€¢ Vendeur nÃ©cessite approbation
    â€¢ 3 Ã©checs = blocage temporaire
    â€¢ Session avec expiration
endlegend

@enduml
