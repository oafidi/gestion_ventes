@startuml DA03 - Traitement Commande Admin

!theme plain
title <size:20>**DA03 - Traitement des Commandes**</size>\n<size:14>//Gestion du cycle de vie par l'administrateur//</size>

skinparam backgroundColor #FEFEFE
skinparam ActivityBackgroundColor #E3F2FD
skinparam ActivityBorderColor #1976D2
skinparam ActivityDiamondBackgroundColor #FFF3E0
skinparam ActivityDiamondBorderColor #F57C00
skinparam ArrowColor #1976D2

|#E8F5E9| ğŸ›¡ï¸ Administrateur |
|#E3F2FD| ğŸ“‹ SystÃ¨me Commandes |
|#FCE4EC| ğŸ“¦ Gestion Stock |
|#FFF3E0| ğŸ›’ Client |

start

|ğŸ›¡ï¸ Administrateur|
:AccÃ©der au tableau de bord;

|ğŸ“‹ SystÃ¨me Commandes|
:Afficher les commandes en attente;

note right
    **Commandes Ã  traiter :**
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ NÂ°     â”‚ Montant â”‚ Statut â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ #0042  â”‚ 150â‚¬    â”‚ ğŸŸ¡     â”‚
    â”‚ #0041  â”‚ 85â‚¬     â”‚ ğŸŸ¡     â”‚
    â”‚ #0040  â”‚ 200â‚¬    â”‚ ğŸŸ¡     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜
end note

|ğŸ›¡ï¸ Administrateur|
:SÃ©lectionner une commande;

|ğŸ“‹ SystÃ¨me Commandes|
:Afficher les dÃ©tails complets;

|ğŸ›¡ï¸ Administrateur|
:Examiner la commande;

note right
    **VÃ©rifications :**
    â€¢ Articles commandÃ©s
    â€¢ Informations client
    â€¢ Adresse de livraison
    â€¢ Stock disponible
end note

switch (DÃ©cision de l'administrateur ?)

case (âœ… Confirmer)
    
    |ğŸ“‹ SystÃ¨me Commandes|
    :Changer statut â†’ CONFIRMÃ‰E;
    :Enregistrer date de confirmation;
    
    |ğŸ›’ Client|
    :ğŸ“§ Recevoir notification\n"Commande confirmÃ©e";
    
    |ğŸ›¡ï¸ Administrateur|
    :PrÃ©parer l'expÃ©dition;
    
    |ğŸ“‹ SystÃ¨me Commandes|
    :Changer statut â†’ EN_COURS_LIVRAISON;
    :GÃ©nÃ©rer numÃ©ro de suivi;
    
    |ğŸ›’ Client|
    :ğŸ“§ Recevoir notification\n"Colis expÃ©diÃ©"\nNÂ° suivi : TRK-XXX;
    
    |ğŸ“‹ SystÃ¨me Commandes|
    #LightGreen:Attendre confirmation livraison;
    
    if (Livraison confirmÃ©e ?) then (Oui)
        :Changer statut â†’ LIVRÃ‰E;
        :ClÃ´turer la commande;
        
        |ğŸ›’ Client|
        :ğŸ“§ Recevoir notification\n"Commande livrÃ©e"\nâ­ Donnez votre avis !;
    else (ProblÃ¨me livraison)
        |ğŸ“‹ SystÃ¨me Commandes|
        :Signaler le problÃ¨me;
        :Contacter le client;
    endif

case (âŒ Annuler)
    
    |ğŸ“‹ SystÃ¨me Commandes|
    :Changer statut â†’ ANNULÃ‰E;
    
    |ğŸ“¦ Gestion Stock|
    :ğŸ”„ Restaurer le stock rÃ©servÃ©;
    
    note right
        **Restauration stock :**
        Les quantitÃ©s sont
        remises Ã  disposition
    end note
    
    |ğŸ“‹ SystÃ¨me Commandes|
    :Initier le remboursement;
    
    |ğŸ›’ Client|
    :ğŸ“§ Recevoir notification\n"Commande annulÃ©e"\nğŸ’° Remboursement en cours;

case (â¸ï¸ Mettre en attente)
    
    |ğŸ“‹ SystÃ¨me Commandes|
    :Ajouter une note interne;
    :Marquer pour suivi ultÃ©rieur;
    
    |ğŸ›¡ï¸ Administrateur|
    :Contacter le client si nÃ©cessaire;

endswitch

|ğŸ›¡ï¸ Administrateur|
:Traiter la commande suivante;

stop

legend right
    **Cycle de vie :**
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    ğŸŸ¡ EN_ATTENTE
       â†“
    ğŸŸ¢ CONFIRMÃ‰E
       â†“
    ğŸ”µ EN_COURS_LIVRAISON
       â†“
    âœ… LIVRÃ‰E
    
    âŒ ANNULÃ‰E (Ã  tout moment)
endlegend

@enduml
