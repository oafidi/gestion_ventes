@startuml DA06 - Gestion Avis

!theme plain
title <size:20>**DA06 - Processus de Gestion des Avis**</size>\n<size:14>//Ã‰valuation des produits par les clients//</size>

skinparam backgroundColor #FEFEFE
skinparam ActivityBackgroundColor #E3F2FD
skinparam ActivityBorderColor #1976D2
skinparam ActivityDiamondBackgroundColor #FFF3E0
skinparam ActivityDiamondBorderColor #F57C00
skinparam ArrowColor #1976D2

|#FFF3E0| ğŸ›’ Client |
|#E3F2FD| â­ SystÃ¨me Avis |
|#E1BEE7| ğŸª Vendeur |

start

|ğŸ›’ Client|
:Consulter un produit achetÃ©;

|â­ SystÃ¨me Avis|
:Afficher la fiche produit\navec les avis existants;

note right
    **Avis affichÃ©s :**
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    â­â­â­â­â­ Ahmed
    "Excellent !"
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    â­â­â­â­â˜† Sara
    "TrÃ¨s bien"
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    **Moyenne : 4.5/5**
end note

|ğŸ›’ Client|
:Cliquer sur "Donner mon avis";

|â­ SystÃ¨me Avis|
:VÃ©rifier si le client a achetÃ© ce produit;

if (Produit achetÃ© ?) then (Non)
    :âŒ Afficher message\n"Vous devez acheter ce produit\npour donner un avis";
    stop
else (Oui)
endif

:VÃ©rifier si un avis existe dÃ©jÃ ;

if (Avis dÃ©jÃ  donnÃ© ?) then (Oui)
    :Afficher l'avis existant;
    
    |ğŸ›’ Client|
    if (Modifier l'avis ?) then (Oui)
        :ğŸ“ Modifier l'avis existant;
    else (Non)
        stop
    endif
else (Non)
    |ğŸ›’ Client|
    :ğŸ“ RÃ©diger un nouvel avis;
endif

|ğŸ›’ Client|
:Remplir le formulaire;

note right
    **Formulaire d'avis :**
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Note : â­â­â­â­â˜†        â”‚
    â”‚        (4 Ã©toiles)      â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ Commentaire :           â”‚
    â”‚ "TrÃ¨s bon produit,      â”‚
    â”‚  livraison rapide.      â”‚
    â”‚  Je recommande !"       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
end note

:Soumettre l'avis;

|â­ SystÃ¨me Avis|
:Valider le contenu;

if (Contenu appropriÃ© ?) then (Non)
    :âš ï¸ Avertissement\n"Contenu non conforme";
    |ğŸ›’ Client|
    :Modifier le commentaire;
    stop
else (Oui)
endif

fork
    :Enregistrer l'avis;
fork again
    :Analyser le sentiment;
    
    note right
        **Analyse automatique :**
        Mots positifs dÃ©tectÃ©s
        â†’ estPositif = true
    end note
fork again
    :Recalculer la note moyenne;
end fork

:âœ… Avis publiÃ©;

|ğŸ›’ Client|
:ğŸ‰ "Merci pour votre avis !";

|ğŸª Vendeur|
:ğŸ“§ Notification\n"Nouvel avis reÃ§u\nâ­â­â­â­â˜† sur iPhone 15";

:Consulter l'avis;

if (Avis inappropriÃ© ?) then (Oui)
    :Demander le masquage;
    
    |â­ SystÃ¨me Avis|
    :estCache = true;
    :Avis masquÃ© (non visible);
    
    note right
        L'avis reste en base
        mais n'est plus affichÃ©
        publiquement
    end note
else (Non)
    |ğŸª Vendeur|
    :Prendre note du retour client;
endif

stop

legend right
    **RÃ¨gles mÃ©tier :**
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    â€¢ Achat requis pour donner un avis
    â€¢ Un seul avis par client/produit
    â€¢ Analyse de sentiment automatique
    â€¢ Vendeur peut masquer les abus
endlegend

@enduml
