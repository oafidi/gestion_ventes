@startuml DS04 - Inscrire Produit Vendeur

!theme plain
title <size:20>**DS04 - Inscription d'un Produit**</size>\n<size:14>//Le vendeur propose un produit √† la vente//</size>

skinparam backgroundColor #FEFEFE
skinparam sequenceMessageAlign center
skinparam responseMessageBelowArrow true
skinparam maxMessageSize 200

skinparam participant {
    BackgroundColor #E3F2FD
    BorderColor #1976D2
    FontColor #1565C0
}

skinparam actor {
    BackgroundColor #E1BEE7
    BorderColor #7B1FA2
}

actor "üè™ Vendeur" as V #E1BEE7
participant "üì± Espace\nVendeur" as E #E3F2FD
participant "üì¶ Catalogue\nProduits" as C #FFF3E0
participant "üìã Offres\nVendeur" as O #E8F5E9

note over V, O #E1F5FE
    **Objectif m√©tier** : Permettre au vendeur approuv√©
    de proposer ses propres offres sur les produits du catalogue
end note

== üì¶ PHASE 1 : S√©lection du Produit ==

V -> E: Acc√©der √† "Inscrire un produit"
activate E #BBDEFB
E -> C: Demander les produits disponibles
activate C #FFE0B2
C --> E: Liste des produits du catalogue
deactivate C
E --> V: **Catalogue des produits**\n(disponibles √† la vente)
deactivate E

note right of E #FFFDE7
    **Le vendeur voit :**
    ‚Ä¢ Nom du produit
    ‚Ä¢ Cat√©gorie
    ‚Ä¢ Prix de r√©f√©rence
    ‚Ä¢ Description officielle
end note

V -> E: S√©lectionner un produit\n(ex: "iPhone 15 Pro")
activate E #BBDEFB
E --> V: **Formulaire d'offre**
deactivate E

|||

== ‚úèÔ∏è PHASE 2 : Cr√©ation de l'Offre ==

note right of V #FFFDE7
    **Le vendeur d√©finit :**
    ‚Ä¢ Son prix de vente (ex: 1150 ‚Ç¨)
    ‚Ä¢ Titre personnalis√©
    ‚Ä¢ Description de son offre
    ‚Ä¢ Photo du produit (optionnel)
end note

V -> E: Soumettre l'offre
activate E #BBDEFB
E -> O: V√©rifier si d√©j√† inscrit
activate O #C8E6C9

alt #FFEBEE <color:#C62828>‚ùå Produit d√©j√† inscrit</color>
    O --> E: Offre existante pour ce vendeur
    E --> V: **Vous vendez d√©j√† ce produit !**\nModifiez votre offre existante
    deactivate O
    deactivate E
else #E8F5E9 <color:#2E7D32>‚úÖ Nouvelle inscription</color>
    O -> O: Cr√©er l'offre (VendeurProduit)
    
    note right of O #E8F5E9
        **Offre cr√©√©e :**
        ‚Ä¢ Vendeur : [Nom du vendeur]
        ‚Ä¢ Produit : iPhone 15 Pro
        ‚Ä¢ Prix vendeur : 1150 ‚Ç¨
        ‚Ä¢ Statut : **EN ATTENTE**
        ‚Ä¢ Date : 28/12/2024
    end note
    
    O --> E: Offre enregistr√©e
    deactivate O
    E --> V: **‚úÖ Offre soumise !**\nElle sera visible apr√®s\nvalidation par l'administrateur
    deactivate E
end

|||

== ‚è≥ PHASE 3 : Attente de Validation ==

note over V, O #FFFDE7
    **En attente d'approbation**
    Le vendeur peut :
    ‚Ä¢ Consulter l'√©tat de sa demande
    ‚Ä¢ Modifier son offre
    ‚Ä¢ Supprimer sa demande
    
    L'administrateur va examiner l'offre
    (voir DS05 - Approbation Admin)
end note

|||

note over V, O #E1F5FE
    **R√®gles m√©tier :**
    ‚Ä¢ Un vendeur doit √™tre approuv√© pour soumettre des offres
    ‚Ä¢ Chaque offre n√©cessite une validation admin
    ‚Ä¢ Un vendeur ne peut avoir qu'une offre par produit
    ‚Ä¢ Le prix vendeur peut diff√©rer du prix de r√©f√©rence
end note

@enduml