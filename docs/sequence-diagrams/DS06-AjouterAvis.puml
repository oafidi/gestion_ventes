@startuml DS06 - Ajouter Avis

!theme plain
title <size:20>**DS06 - Syst√®me d'Avis Client**</size>\n<size:14>//√âvaluation des produits et vendeurs//</size>

skinparam backgroundColor #FEFEFE
skinparam sequenceMessageAlign center
skinparam responseMessageBelowArrow true
skinparam maxMessageSize 200

skinparam participant {
    BackgroundColor #E3F2FD
    BorderColor #1976D2
    FontColor #1565C0
}

skinparam actor {
    BackgroundColor #FFF3E0
    BorderColor #F57C00
}

actor "üõí Client" as C #FFF3E0
participant "üìÑ Fiche\nProduit" as F #E3F2FD
participant "‚≠ê Syst√®me\nAvis" as SA #FFF3E0
participant "üè™ Vendeur" as V #E1BEE7

note over C, V #E1F5FE
    **Objectif m√©tier** : Permettre aux clients de partager
    leur exp√©rience et aider les futurs acheteurs
end note

== üìÑ PHASE 1 : Acc√®s au Produit ==

C -> F: Consulter un produit achet√©
activate F #BBDEFB
F --> C: **Fiche produit**\navec section "Avis clients"
deactivate F

note right of F #FFFDE7
    **Avis existants :**
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê Ahmed
    "Excellent produit !"
    ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    ‚≠ê‚≠ê‚≠ê‚≠ê‚òÜ Sara
    "Tr√®s bien, livraison rapide"
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    **Note moyenne : 4.5/5**
end note

C -> F: Cliquer "Donner mon avis"
activate F #BBDEFB
F --> C: **Formulaire d'avis**
deactivate F

|||

== ‚úèÔ∏è PHASE 2 : R√©daction de l'Avis ==

note right of C #FFFDE7
    **Le client remplit :**
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ Note : ‚≠ê‚≠ê‚≠ê‚≠ê‚òÜ (4/5)      ‚îÇ
    ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
    ‚îÇ Commentaire :               ‚îÇ
    ‚îÇ "Tr√®s bon produit, la       ‚îÇ
    ‚îÇ qualit√© est au rendez-vous. ‚îÇ
    ‚îÇ Je recommande ce vendeur !" ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
end note

C -> F: Soumettre l'avis
activate F #BBDEFB
F -> SA: Enregistrer l'avis
activate SA #FFE0B2

SA -> SA: V√©rifier si avis d√©j√† donn√©

alt #FFEBEE <color:#C62828>‚ùå Avis d√©j√† existant</color>
    SA --> F: Client a d√©j√† not√© ce produit
    F --> C: **Vous avez d√©j√† donn√© un avis**\nVous pouvez le modifier
    deactivate SA
    deactivate F
else #E8F5E9 <color:#2E7D32>‚úÖ Nouvel avis</color>
    SA -> SA: Analyse du sentiment
    
    note right of SA #E8F5E9
        **Analyse automatique :**
        Commentaire positif d√©tect√©
        ‚Üí estPositif = true
    end note
    
    SA -> SA: Enregistrer l'avis
    
    note right of SA #FFFDE7
        **Avis enregistr√© :**
        ‚Ä¢ Client : [Nom]
        ‚Ä¢ Note : 4/5
        ‚Ä¢ Commentaire : "..."
        ‚Ä¢ Date : 28/12/2024
        ‚Ä¢ Sentiment : Positif ‚úÖ
    end note
    
    SA --> F: Avis enregistr√©
    deactivate SA
    F --> C: **‚úÖ Merci pour votre avis !**\nIl est maintenant visible\npar les autres clients
    deactivate F
end

|||

== üîî NOTIFICATION AU VENDEUR ==

SA -> V: üìß Nouvel avis re√ßu
note right of V #E1BEE7
    "Vous avez re√ßu un
    nouvel avis 4‚òÖ sur
    votre produit iPhone 15"
end note

|||

== üëÅÔ∏è GESTION PAR LE VENDEUR ==

V -> V: Consulter ses avis

note right of V #FFFDE7
    **Le vendeur peut :**
    ‚Ä¢ Voir tous ses avis
    ‚Ä¢ Identifier les avis n√©gatifs
    ‚Ä¢ Masquer un avis inappropri√©
      (estCache = true)
end note

|||

note over C, V #E1F5FE
    **R√®gles m√©tier :**
    ‚Ä¢ Un client ne peut donner qu'un seul avis par produit/vendeur
    ‚Ä¢ L'analyse de sentiment est automatique
    ‚Ä¢ Le vendeur peut masquer les avis inappropri√©s
    ‚Ä¢ La note moyenne est recalcul√©e automatiquement
end note

@enduml