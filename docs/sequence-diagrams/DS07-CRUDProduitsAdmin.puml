@startuml DS07 - CRUD Produits Admin

!theme plain
title <size:20>**DS07 - Gestion du Catalogue Produits**</size>\n<size:14>//Administration des produits et du stock//</size>

skinparam backgroundColor #FEFEFE
skinparam sequenceMessageAlign center
skinparam responseMessageBelowArrow true
skinparam maxMessageSize 250

skinparam participant {
    BackgroundColor #E3F2FD
    BorderColor #1976D2
    FontColor #1565C0
}

skinparam actor {
    BackgroundColor #E8F5E9
    BorderColor #388E3C
}

actor "üõ°Ô∏è Administrateur" as A #E8F5E9
participant "üìä Tableau de Bord" as T #E3F2FD
participant "üì¶ Catalogue\nProduits" as P #FFF3E0
participant "üìä Gestion\nStock" as S #FCE4EC

note over A, S #E1F5FE
    **Objectif m√©tier** : L'administrateur g√®re
    le catalogue central des produits de la plateforme
end note

== ‚ûï CR√âER UN NOUVEAU PRODUIT ==

A -> T: Acc√©der √† "Nouveau produit"
activate T #BBDEFB
T --> A: **Formulaire de cr√©ation**
deactivate T

note right of T #FFFDE7
    **Informations √† renseigner :**
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ üìù Nom : iPhone 15 Pro     ‚îÇ
    ‚îÇ üìÇ Cat√©gorie : Smartphones ‚îÇ
    ‚îÇ üí∞ Prix r√©f√©rence : 1199 ‚Ç¨ ‚îÇ
    ‚îÇ üìÑ Description : ...       ‚îÇ
    ‚îÇ üì¶ Quantit√© initiale : 100 ‚îÇ
    ‚îÇ üñºÔ∏è Image : [upload]        ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
end note

A -> T: Soumettre le formulaire
activate T #BBDEFB
T -> P: Cr√©er le produit
activate P #FFE0B2
P -> P: Validation des donn√©es
P -> P: Enregistrement en base

note right of P #E8F5E9
    **Produit cr√©√© :**
    ‚Ä¢ ID : 42
    ‚Ä¢ Nom : iPhone 15 Pro
    ‚Ä¢ Cat√©gorie : Smartphones
    ‚Ä¢ Prix : 1199 ‚Ç¨
    ‚Ä¢ Stock : 100 unit√©s
end note

P --> T: Produit cr√©√© avec succ√®s
deactivate P
T --> A: **‚úÖ Produit ajout√© au catalogue !**
deactivate T

|||

== ‚úèÔ∏è MODIFIER UN PRODUIT ==

A -> T: S√©lectionner un produit existant
activate T #BBDEFB
T -> P: R√©cup√©rer les d√©tails
activate P #FFE0B2
P --> T: Informations actuelles
deactivate P
T --> A: **Formulaire pr√©-rempli**
deactivate T

note right of A #FFFDE7
    **Modifications possibles :**
    ‚Ä¢ Changer le nom
    ‚Ä¢ Modifier la description
    ‚Ä¢ Ajuster le prix de r√©f√©rence
    ‚Ä¢ Changer la cat√©gorie
    ‚Ä¢ Mettre √† jour l'image
end note

A -> T: Enregistrer les modifications
activate T #BBDEFB
T -> P: Mettre √† jour le produit
activate P #FFE0B2
P -> P: Sauvegarde des modifications
P --> T: Modifications enregistr√©es
deactivate P
T --> A: **‚úÖ Produit mis √† jour !**
deactivate T

|||

== üìä G√âRER LE STOCK ==

A -> T: Acc√©der √† la gestion des stocks
activate T #BBDEFB
T -> S: R√©cup√©rer l'√©tat des stocks
activate S #F8BBD9
S --> T: Liste des produits avec quantit√©s
deactivate S

T --> A: **Tableau des stocks**
deactivate T

note right of T #FFFDE7
    **√âtat du stock :**
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ Produit        ‚îÇ Stock ‚îÇ √âtat    ‚îÇ
    ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
    ‚îÇ iPhone 15 Pro  ‚îÇ 100   ‚îÇ üü¢ OK   ‚îÇ
    ‚îÇ Galaxy S24     ‚îÇ 15    ‚îÇ üü° Bas  ‚îÇ
    ‚îÇ MacBook Air    ‚îÇ 3     ‚îÇ üî¥ Crit ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
end note

A -> T: Modifier le stock du MacBook Air\n(3 ‚Üí 50 unit√©s)
activate T #BBDEFB
T -> S: Mettre √† jour la quantit√©
activate S #F8BBD9
S -> S: Nouvelle quantit√© = 50
S -> S: dateDernierStock = aujourd'hui
S --> T: Stock mis √† jour
deactivate S
T --> A: **‚úÖ Stock modifi√©**\n3 ‚Üí 50 unit√©s
deactivate T

|||

== üóëÔ∏è SUPPRIMER UN PRODUIT ==

A -> T: Cliquer "Supprimer" sur un produit
activate T #BBDEFB

T --> A: **‚ö†Ô∏è Confirmation requise**\nCette action est irr√©versible.\nLes offres vendeurs seront aussi supprim√©es.
deactivate T

alt #FFEBEE <color:#C62828>‚ùå Annulation</color>
    A -> T: Annuler
    T --> A: Suppression annul√©e
else #E8F5E9 <color:#2E7D32>‚úÖ Confirmation</color>
    A -> T: Confirmer la suppression
    activate T #BBDEFB
    T -> P: Supprimer le produit
    activate P #FFE0B2
    
    P -> P: Supprimer les offres li√©es
    note right of P #FFEBEE
        **Cascade :**
        Les VendeurProduit associ√©s
        sont √©galement supprim√©s
    end note
    
    P -> P: Supprimer le produit
    P --> T: Produit supprim√©
    deactivate P
    T --> A: **‚úÖ Produit retir√© du catalogue**
    deactivate T
end

|||

note over A, S #E1F5FE
    **R√®gles m√©tier :**
    ‚Ä¢ Seul l'admin peut g√©rer le catalogue central
    ‚Ä¢ La suppression est en cascade (offres vendeurs supprim√©es)
    ‚Ä¢ Un stock critique d√©clenche une alerte visuelle
    ‚Ä¢ La date de derni√®re mise √† jour du stock est enregistr√©e
end note

@enduml